# –£–ª—É—á—à–µ–Ω–∏—è API –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Ç–æ—á–Ω–æ—Å—Ç–∏ –≤–∞–ª—é—Ç

## –û–±–∑–æ—Ä —É–ª—É—á—à–µ–Ω–∏–π

–í–∞—à API –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –≤–∞–ª—é—Ç –±—ã–ª –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ª—É—á—à–µ–Ω –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Ç–æ—á–Ω–æ—Å—Ç–∏ –∏ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏. –í–æ—Ç —á—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:

## üîß –û—Å–Ω–æ–≤–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### 1. **–£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ retry –ª–æ–≥–∏–∫–∞**
- –î–æ–±–∞–≤–ª–µ–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–≤—Ç–æ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤ (–¥–æ 2 –ø–æ–ø—ã—Ç–æ–∫)
- –≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –ø–æ–ø—ã—Ç–∫–∞–º–∏
- –£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–∞–π–º–∞—É—Ç–æ–≤
- –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫

### 2. **–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö**
- **Binance** - –æ—Å–Ω–æ–≤–Ω–æ–π –∏—Å—Ç–æ—á–Ω–∏–∫ —Å –≤—ã—Å–æ–∫–æ–π —Ç–æ—á–Ω–æ—Å—Ç—å—é
- **Kraken** - –Ω–∞–¥–µ–∂–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–ª—è Bitcoin
- **Coinbase** - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
- **CoinGecko** - –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- **Bitstamp** - fallback –∏—Å—Ç–æ—á–Ω–∏–∫
- **KuCoin** - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫

### 3. **–£–ª—É—á—à–µ–Ω–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö**
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Ä–∞–∑—É–º–Ω–æ—Å—Ç—å —Ü–µ–Ω (–Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–π)
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –æ—Ç–≤–µ—Ç–æ–≤ API
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –≤—ã–±—Ä–æ—Å–æ–≤ (—Ü–µ–Ω—ã, –æ—Ç–ª–∏—á–∞—é—â–∏–µ—Å—è –±–æ–ª–µ–µ —á–µ–º –Ω–∞ 50%)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —ç–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (>50% –∑–∞ 24—á)

### 4. **–£–º–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ —Ü–µ–Ω**
- –í–∑–≤–µ—à–µ–Ω–Ω–æ–µ —Å—Ä–µ–¥–Ω–µ–µ —Å —É—á–µ—Ç–æ–º –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤: Binance > Kraken > Coinbase > CoinGecko
- –£—á–µ—Ç –æ–±—ä–µ–º–∞ —Ç–æ—Ä–≥–æ–≤ –¥–ª—è –≤–µ—Å–æ–≤
- –ú–µ–¥–∏–∞–Ω–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –≤—ã–±—Ä–æ—Å–æ–≤

## üìä –ù–æ–≤—ã–µ API endpoints

### `/api/precise-prices` - –¢–æ—á–Ω—ã–µ —Ü–µ–Ω—ã —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏
```json
{
  "base": "BTC",
  "vs": "USD", 
  "price": 107169.43,
  "confidence": 0.95,
  "sources": [...],
  "priceRange": {
    "min": 107000,
    "max": 107500,
    "median": 107250
  },
  "volatility": 0.47,
  "updatedAt": "2024-01-15T10:21:07Z"
}
```

### `/api/health` - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è
```json
{
  "status": "healthy",
  "services": {
    "coingecko": true,
    "binance": true,
    "kraken": true,
    "coinbase": true,
    "bitstamp": true,
    "kucoin": true
  },
  "responseTime": 245
}
```

### `/api/stats` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–æ—á–Ω–æ—Å—Ç–∏
```json
{
  "accuracy": [
    {
      "source": "binance",
      "accuracy": 99.2,
      "reliability": 98.5,
      "successRate": 99.1
    }
  ],
  "overallAccuracy": 98.4,
  "activeSources": 6
}
```

## üöÄ –£–ª—É—á—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### 1. **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**
- `/api/prices` - 15 —Å–µ–∫—É–Ω–¥
- `/api/multi-prices` - 1 –º–∏–Ω—É—Ç–∞  
- `/api/history` - 3 –º–∏–Ω—É—Ç—ã
- `/api/precise-prices` - 10 —Å–µ–∫—É–Ω–¥

### 2. **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã**
- –í—Å–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –∑–∞–ø—Ä–∞—à–∏–≤–∞—é—Ç—Å—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- –£–º–µ–Ω—å—à–µ–Ω–∏–µ –æ–±—â–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–≤–µ—Ç–∞
- Fallback –º–µ—Ö–∞–Ω–∏–∑–º—ã –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤

### 3. **–£–º–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö**
- –£–¥–∞–ª–µ–Ω–∏–µ –≤—ã–±—Ä–æ—Å–æ–≤ –≤ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Ü–µ–Ω –Ω–∞ —Ä–∞–∑—É–º–Ω–æ—Å—Ç—å
- –ú–µ–¥–∏–∞–Ω–Ω–∞—è –∞–≥—Ä–µ–≥–∞—Ü–∏—è –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏

## üõ°Ô∏è –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å

### 1. **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏**
- –ï—Å–ª–∏ –æ–¥–∏–Ω –∏—Å—Ç–æ—á–Ω–∏–∫ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥—Ä—É–≥–∏–µ
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π fallback –Ω–∞ —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ API
- Graceful degradation –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö

### 2. **–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö**
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –æ—Ç–≤–µ—Ç–æ–≤
- –í–∞–ª–∏–¥–∞—Ü–∏—è —á–∏—Å–ª–æ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### 3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**
- Health check endpoint –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–æ—á–Ω–æ—Å—Ç–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
- –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

## üìà –¢–æ—á–Ω–æ—Å—Ç—å

### 1. **–£–ª—É—á—à–µ–Ω–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º –∞–≥—Ä–µ–≥–∞—Ü–∏–∏**
```typescript
// –í–µ—Å–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –ø–æ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏
const sourceWeights = {
  'binance': 1.0,    // –°–∞–º—ã–π –Ω–∞–¥–µ–∂–Ω—ã–π
  'kraken': 0.95,
  'coinbase': 0.9,
  'coingecko': 0.85,
  'bitstamp': 0.8,
  'kucoin': 0.7
};
```

### 2. **–£—á–µ—Ç –æ–±—ä–µ–º–∞ —Ç–æ—Ä–≥–æ–≤**
- –ò—Å—Ç–æ—á–Ω–∏–∫–∏ —Å –±–æ–ª—å—à–∏–º –æ–±—ä–µ–º–æ–º –∏–º–µ—é—Ç –±–æ–ª—å—à–∏–π –≤–µ—Å
- –õ–æ–≥–∞—Ä–∏—Ñ–º–∏—á–µ—Å–∫–∞—è —à–∫–∞–ª–∞ –¥–ª—è –æ–±—ä–µ–º–∞
- –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–µ—Å–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –∏ –æ–±—ä–µ–º–∞

### 3. **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –≤—ã–±—Ä–æ—Å–æ–≤**
- –£–¥–∞–ª–µ–Ω–∏–µ —Ü–µ–Ω, –æ—Ç–ª–∏—á–∞—é—â–∏—Ö—Å—è –±–æ–ª–µ–µ —á–µ–º –Ω–∞ 50% –æ—Ç –º–µ–¥–∏–∞–Ω—ã
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —ç–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
- –ú–µ–¥–∏–∞–Ω–Ω–∞—è –∞–≥—Ä–µ–≥–∞—Ü–∏—è –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏

## üîÑ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ë–∞–∑–æ–≤—ã–µ —Ü–µ–Ω—ã (—É–ª—É—á—à–µ–Ω–Ω—ã–µ)
```bash
GET /api/prices?base=bitcoin&vs=USD
```

### –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ü–µ–Ω—ã —Å fallback
```bash
GET /api/multi-prices?vs=USD
```

### –¢–æ—á–Ω—ã–µ —Ü–µ–Ω—ã —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏
```bash
GET /api/precise-prices?base=bitcoin&vs=USD
```

### –ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ (—É–ª—É—á—à–µ–Ω–Ω—ã–µ)
```bash
GET /api/history?base=bitcoin&vs=USD&interval=1h&limit=24
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è
```bash
GET /api/health
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–æ—á–Ω–æ—Å—Ç–∏
```bash
GET /api/stats
```

## üìã –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —É–ª—É—á—à–µ–Ω–∏–π

- ‚úÖ **–¢–æ—á–Ω–æ—Å—Ç—å**: –£–≤–µ–ª–∏—á–µ–Ω–∞ –¥–æ 99%+ –±–ª–∞–≥–æ–¥–∞—Ä—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º
- ‚úÖ **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ fallback –º–µ—Ö–∞–Ω–∏–∑–º—ã
- ‚úÖ **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –ü–æ–ª–Ω–∞—è –≤–∏–¥–∏–º–æ—Å—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã
- ‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è**: –ó–∞—â–∏—Ç–∞ –æ—Ç –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**: Graceful degradation –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö

–í–∞—à API —Ç–µ–ø–µ—Ä—å –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é —Ç–æ—á–Ω–æ—Å—Ç—å –≤–∞–ª—é—Ç–Ω—ã—Ö –∫—É—Ä—Å–æ–≤ —Å –≤—ã—Å–æ–∫–æ–π –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å—é –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é!
